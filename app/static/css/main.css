* { margin: 0; padding: 0; box-sizing: border-box; }

:root { --app-font-family: 'Raleway', 'Verdana', sans-serif; }

body, html {    height: 100%;
                font-family: var(--app-font-family);
                overflow: hidden; }

button, input, select { font-family: inherit; }

#map-container {    position: relative;
                    width: 100vw;
                    height: 100vh; }

#map {  width: 100%;
        height: 100%; }

.leaflet-marker-icon.marker-pin-icon {
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.25));
}

.leaflet-marker-icon.trip-marker-icon {
    position: relative;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, rgba(255, 255, 255, 0.95), rgba(255, 125, 0, 0.95));
    border: 4px solid rgba(255, 255, 255, 0.9);
    box-shadow: 0 12px 28px rgba(255, 107, 0, 0.45);
    overflow: hidden;
    transform-origin: center;
    transition: transform 0.18s ease, box-shadow 0.18s ease;
}

.leaflet-marker-icon.trip-marker-icon::after {
    content: '';
    position: absolute;
    inset: 8px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff7a18, #ffb347);
    box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.55);
}

.leaflet-marker-icon.trip-marker-icon::before {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 18px;
    height: 18px;
    background: rgba(255, 125, 0, 0.65);
    border-radius: 50%;
    filter: blur(8px);
}

.leaflet-marker-icon.trip-marker-icon:hover,
.leaflet-marker-icon.trip-marker-icon.leaflet-interactive:focus {
    transform: scale(1.06);
    box-shadow: 0 16px 34px rgba(255, 107, 0, 0.55);
}

.leaflet-tooltip.trip-marker-tooltip {
    background: rgba(17, 24, 39, 0.92);
    color: #fff;
    border: none;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.02em;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.3);
}

.leaflet-tooltip.trip-marker-tooltip::before {
    display: none;
}

.menu-container {   position: absolute;
                    top: 24px;
                    right: 24px;
                    z-index: 1000;
                    display: flex;
                    flex-direction: column;
                    align-items: flex-end;
                    gap: 16px;
                    width: auto; }

.menu-container.open {  gap: 20px; }

.filter-window {          position: absolute;
                          right: 24px;
                          bottom: 24px;
                          z-index: 950;
                          display: flex;
                          flex-direction: column;
                          align-items: stretch;
                          gap: 16px;
                          width: min(300px, calc(100vw - 64px));
                          max-height: calc(100vh - 48px);
                          padding: 20px 22px;
                          background: rgba(255,255,255,0.96);
                          border-radius: 20px;
                          box-shadow: 0 12px 32px rgba(0,0,0,0.18);
                          backdrop-filter: blur(14px);
                          overflow-y: auto; }

.filter-window-title {    font-size: 16px;
                          letter-spacing: 0.1em;
                          text-transform: uppercase;
                          color: #111827;
                          text-align: left; }

.filter-window-subtitle { font-size: 14px;
                          font-weight: 700;
                          letter-spacing: 0.08em;
                          text-transform: uppercase;
                          color: #1f2937;
                          text-align: left; }

.filter-window .checkbox-group label {
    justify-content: flex-start;
}

.filter-window .checkbox-group label span {
    text-align: left;
}

.filter-window .date-filter-group label {
    justify-content: space-between;
}

.filter-window .date-filter-group label span {
    text-align: left;
}

.filter-window .date-filter-actions {
    padding-top: 4px;
}

@media (max-width: 640px) {
    .filter-window {
        right: 12px;
        bottom: 12px;
        width: min(260px, calc(100vw - 36px));
        padding: 16px 16px 14px;
    }
}

.menu-toggle {  align-self: flex-end;
                cursor: pointer;
                user-select: none;
                padding: 18px 12px;
                background: rgba(255,255,255,0.95);
                border-radius: 18px;
                box-shadow: 0 6px 18px rgba(0,0,0,0.12);
                transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
                border: none;
                display: inline-flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
                gap: 8px;
                text-transform: uppercase;
                letter-spacing: 0.12em;
                color: #333;
                writing-mode: vertical-rl;
                text-orientation: mixed;
                font-weight: 500; }

.menu-toggle:hover {    background: rgba(255,255,255,1);
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(0,0,0,0.25); }

.menu-toggle:focus { outline: 2px solid rgba(0,120,212,0.6); outline-offset: 2px; }

.menu-toggle .menu-toggle-icon {    display: inline-flex;
                                    align-items: center;
                                    justify-content: center;
                                    width: 20px;
                                    height: 20px;
                                    line-height: 1;
                                    writing-mode: horizontal-tb;
                                    flex-shrink: 0; }

.menu-toggle .menu-toggle-icon img {    width: 100%;
                                        height: 100%;
                                        object-fit: contain;
                                        display: block; }

.menu-toggle .menu-toggle-text { font-size: 12px; }

.menu-container.open .menu-toggle { align-self: flex-end;
                                    margin-left: auto;
                                    writing-mode: horizontal-tb;
                                    flex-direction: row;
                                    padding: 10px 16px;
                                    border-radius: 14px;
                                    gap: 8px;
                                    letter-spacing: 0.08em;
                                    box-shadow: 0 4px 14px rgba(0,0,0,0.15); }
.menu-container.open .menu-toggle .menu-toggle-text { font-size: 14px; }

.overlay-controls { display: flex;
                    flex-direction: column;
                    align-items: stretch;
                    gap: 16px;
                    opacity: 0;
                    transform: translateY(-8px) scale(0.98);
                    transform-origin: top right;
                    transition: opacity 0.25s ease, transform 0.25s ease;
                    pointer-events: none;
                    background: rgba(255,255,255,0.96);
                    border-radius: 20px;
                    padding: 24px 24px 20px;
                    box-shadow: 0 12px 32px rgba(0,0,0,0.22);
                    backdrop-filter: blur(14px);
                    width: min(360px, calc(100vw - 64px));
                    max-height: min(96vh, 768px);
                    overflow-y: auto; }

.overlay-controls[data-active-panel="menuPanelTrips"] {
    max-height: min(96vh, 960px);
}

.overlay-tabs-wrapper {  display: flex;
                        align-items: center;
                        gap: 6px;
                        background: rgba(243, 244, 246, 0.7);
                        padding: 6px;
                        border-radius: 18px;
                        flex-wrap: wrap;
                        width: 100%; }

.overlay-tabs {    display: flex;
                    align-items: center;
                    justify-content: stretch;
                    gap: 6px;
                    flex: 1 1 auto; }

.overlay-manage-toggle {  border: none;
                            background: #e5e7eb;
                            border-radius: 12px;
                            padding: 10px 16px;
                            font-size: 12px;
                            font-weight: 600;
                            letter-spacing: 0.08em;
                            text-transform: uppercase;
                            cursor: pointer;
                            color: #111827;
                            box-shadow: 0 6px 18px rgba(17,24,39,0.12);
                            transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
                            display: inline-flex;
                            align-items: center;
                            justify-content: center;
                            margin-left: auto;
                            white-space: nowrap; }

.overlay-manage-toggle:hover {   background: #d1d5db;
                                  color: #111827;
                                  box-shadow: 0 8px 20px rgba(17,24,39,0.16);
                                  transform: translateY(-1px); }

.overlay-manage-toggle:focus-visible {    outline: 2px solid rgba(0,120,212,0.65);
                                          outline-offset: 2px; }

.overlay-manage-toggle-active {   background: #111827;
                                  color: #fff;
                                  box-shadow: 0 6px 18px rgba(17,24,39,0.18);
                                  transform: translateY(-1px); }

.overlay-manage-toggle-active:hover {  background: #1f2937;
                                        color: #fff; }

.overlay-manage-toggle-active:focus-visible {    outline: 2px solid rgba(255,255,255,0.6);
                                                outline-offset: 2px; }

.overlay-tab {     flex: 1 1 0;
                    border: none;
                    background: transparent;
                    border-radius: 12px;
                    padding: 10px 16px;
                    font-size: 13px;
                    font-weight: 600;
                    letter-spacing: 0.08em;
                    text-transform: uppercase;
                    cursor: pointer;
                    color: #4b5563;
                    transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
                    text-align: center; }

.overlay-tab:hover { background: rgba(255,255,255,0.8); }

.overlay-tab:focus-visible { outline: 2px solid rgba(0,120,212,0.65); outline-offset: 2px; }

.overlay-tab[aria-selected="true"] { background: #111827;
                                    color: #fff;
                                    box-shadow: 0 6px 18px rgba(17,24,39,0.18);
                                    transform: translateY(-1px); }

.overlay-tab-panel {   display: flex;
                        flex-direction: column;
                        gap: 12px; }

.overlay-tab-panel[hidden] { display: none; }

.trips-placeholder {    display: flex;
                        flex-direction: column;
                        gap: 8px;
                        padding: 18px 16px;
                        border-radius: 14px;
                        background: rgba(249,250,251,0.92);
                        color: #1f2937;
                        text-align: right; }

.trips-placeholder h3 { font-size: 16px;
                        letter-spacing: 0.06em;
                        text-transform: uppercase; }

.trips-placeholder p {  font-size: 13px;
                        line-height: 1.5; }

.trip-panel {           display: flex;
                        flex-direction: column;
                        gap: 16px; }

.trip-panel-header {    display: flex;
                        flex-direction: column;
                        gap: 6px;
                        text-align: right; }

.trip-panel-heading {   font-size: 18px;
                        letter-spacing: 0.08em;
                        text-transform: uppercase;
                        color: #111827; }

.trip-panel-subtitle {  font-size: 13px;
                        color: #6b7280;
                        line-height: 1.4; }

.trip-list-view {      display: flex;
                        flex-direction: column;
                        gap: 16px; }

.trip-list-view[hidden] {
    display: none;
}

.trip-detail {         display: flex;
                        flex-direction: column;
                        gap: 16px; }

.trip-detail[hidden] { display: none; }

.trip-detail-back {    align-self: flex-end;
                        border: none;
                        background: rgba(243,244,246,0.92);
                        border-radius: 999px;
                        padding: 8px 16px;
                        font-size: 12px;
                        font-weight: 600;
                        letter-spacing: 0.08em;
                        text-transform: uppercase;
                        color: #111827;
                        cursor: pointer;
                        transition: background 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease; }

.trip-detail-back:hover { background: rgba(229,231,235,0.95);
                           transform: translateY(-1px);
                           box-shadow: 0 4px 12px rgba(15,23,42,0.14); }

.trip-detail-back:focus-visible { outline: 2px solid rgba(17,24,39,0.65);
                                   outline-offset: 2px; }

.trip-detail-header {   display: flex;
                        flex-direction: column;
                        gap: 12px;
                        text-align: right; }

.trip-detail-titles {   display: flex;
                        flex-direction: column;
                        gap: 6px; }

.trip-detail-heading {  font-size: 17px;
                        letter-spacing: 0.06em;
                        text-transform: uppercase;
                        color: #111827; }

.trip-detail-subtitle { font-size: 13px;
                        color: #6b7280;
                        line-height: 1.4; }

.trip-detail-meta {     display: flex;
                        gap: 10px;
                        justify-content: flex-end;
                        flex-wrap: wrap;
                        font-size: 12px;
                        color: #4b5563; }

.trip-detail-meta-entry {   display: inline-flex;
                            align-items: center;
                            gap: 4px; }

.trip-detail-meta-entry time { color: inherit; }

.trip-detail-actions {  display: flex;
                        justify-content: flex-end;
                        flex-wrap: wrap;
                        gap: 8px; }

.trip-detail-rename {   border: none;
                        border-radius: 999px;
                        padding: 8px 16px;
                        font-size: 12px;
                        font-weight: 600;
                        letter-spacing: 0.08em;
                        text-transform: uppercase;
                        background: rgba(243,244,246,0.92);
                        color: #111827;
                        cursor: pointer;
                        transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease; }

.trip-detail-rename:hover:not(:disabled) {
    background: rgba(229,231,235,0.95);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(15,23,42,0.16);
}

.trip-detail-rename:focus-visible {
    outline: 2px solid rgba(17,24,39,0.65);
    outline-offset: 2px;
}

.trip-detail-rename:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
}

.trip-detail-controls { display: flex;
                        flex-direction: column;
                        gap: 12px; }

.trip-controls {        display: flex;
                        flex-direction: column;
                        gap: 12px; }

.trip-search {          display: flex;
                        flex-direction: column;
                        gap: 6px;
                        text-align: right; }

.trip-search-label {    font-size: 12px;
                        text-transform: uppercase;
                        letter-spacing: 0.08em;
                        color: #4b5563;
                        font-weight: 600; }

.trip-search input {    border: 1px solid #d1d5db;
                        border-radius: 12px;
                        padding: 10px 14px;
                        font-size: 14px;
                        background: rgba(255,255,255,0.95);
                        text-align: right;
                        transition: border-color 0.2s ease, box-shadow 0.2s ease; }

.trip-search input:focus {   outline: none;
                            border-color: #111827;
                            box-shadow: 0 0 0 3px rgba(17,24,39,0.15); }

.trip-sort {            display: flex;
                        gap: 8px;
                        justify-content: flex-end;
                        align-items: stretch;
                        flex-wrap: wrap; }

.trip-sort-field {      display: flex;
                        flex-direction: column;
                        gap: 6px;
                        text-align: right; }

.trip-sort-label {      font-size: 12px;
                        text-transform: uppercase;
                        letter-spacing: 0.08em;
                        color: #4b5563;
                        font-weight: 600; }

.trip-sort select {     border: 1px solid #d1d5db;
                        border-radius: 12px;
                        padding: 10px 14px;
                        font-size: 14px;
                        background: rgba(255,255,255,0.95);
                        text-align: right;
                        min-width: 140px;
                        transition: border-color 0.2s ease, box-shadow 0.2s ease; }

.trip-sort select:focus {   outline: none;
                            border-color: #111827;
                            box-shadow: 0 0 0 3px rgba(17,24,39,0.15); }

.trip-sort-direction {  border: none;
                        border-radius: 12px;
                        padding: 9px 14px;
                        background: #111827;
                        color: #fff;
                        font-size: 12px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: background 0.2s ease, transform 0.2s ease;
                        letter-spacing: 0.06em;
                        text-transform: uppercase;
                        display: inline-flex;
                        align-items: center;
                        justify-content: center; }

.trip-sort-direction:hover {   background: #1f2937;
                                transform: translateY(-1px); }

.trip-sort-direction:focus-visible { outline: 2px solid rgba(17,24,39,0.65);
                                    outline-offset: 2px; }

.trip-list-container {  display: flex;
                        flex-direction: column;
                        gap: 10px; }

.trip-list {            display: flex;
                        flex-direction: column;
                        gap: 12px;
                        max-height: 384px;
                        overflow-y: auto;
                        padding-right: 6px; }

.trip-list[hidden] {    display: none; }

.trip-list-message {    font-size: 13px;
                        color: #4b5563;
                        text-align: right;
                        line-height: 1.5;
                        background: rgba(249,250,251,0.9);
                        border-radius: 12px;
                        padding: 14px 16px; }

.trip-list-message-error {  color: #b3261e;
                            background: rgba(254,242,242,0.85);
                            border: 1px solid rgba(179,38,30,0.25); }

.trip-location-list-container {   display: flex;
                                  flex-direction: column;
                                  gap: 10px; }

.trip-location-list {     display: flex;
                            flex-direction: column;
                            gap: 12px;
                            max-height: 384px;
                            overflow-y: auto;
                            padding-right: 6px; }

.trip-location-list[hidden] {
    display: none;
}

.trip-location-item {     display: flex;
                            flex-direction: column;
                            gap: 8px;
                            background: rgba(249,250,251,0.95);
                            padding: 14px 16px;
                            border-radius: 16px;
                            border: 1px solid rgba(229,231,235,0.85);
                            box-shadow: 0 3px 12px rgba(15,23,42,0.08);
                            text-align: right;
                            cursor: pointer;
                            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease; }

.trip-location-item:hover {    transform: translateY(-1px);
                                box-shadow: 0 6px 16px rgba(15,23,42,0.12); }

.trip-location-item:focus-visible {    outline: 2px solid rgba(17,24,39,0.65);
                                        outline-offset: 3px; }

.trip-location-item-active {  border-color: rgba(17,24,39,0.6);
                                box-shadow: 0 8px 20px rgba(17,24,39,0.18);
                                background: rgba(17,24,39,0.05); }

.trip-location-item-active .trip-location-name {
    color: #0f172a;
}

.trip-location-item-missing {
    border-style: dashed;
    border-color: rgba(209,213,219,0.9);
    background: rgba(249,250,251,0.6);
    color: #6b7280;
}

.trip-location-name {     font-size: 15px;
                            font-weight: 600;
                            color: #111827;
                            word-break: break-word; }

.trip-location-item-missing .trip-location-name {
    color: #4b5563;
}

.trip-location-meta {     display: flex;
                            flex-direction: column;
                            gap: 6px;
                            font-size: 12px;
                            color: #4b5563; }

.trip-location-meta-row { display: inline-flex;
                            gap: 8px;
                            justify-content: flex-end;
                            flex-wrap: wrap; }

.trip-location-meta-entry {   display: inline-flex;
                                align-items: center;
                                gap: 4px; }

.trip-location-meta-entry time { color: inherit; }

.trip-location-meta-label { font-size: 11px;
                            letter-spacing: 0.06em;
                            text-transform: uppercase;
                            color: #6b7280; }

.trip-location-tag {      display: inline-flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 999px;
                            padding: 2px 8px;
                            font-size: 11px;
                            letter-spacing: 0.06em;
                            text-transform: uppercase;
                            background: rgba(17,24,39,0.08);
                            color: #111827; }

.trip-location-missing-note {    font-size: 12px;
                                 line-height: 1.5;
                                 color: #6b7280; }

.trip-location-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: 4px;
}

.trip-location-remove {
    border: none;
    border-radius: 999px;
    padding: 6px 14px;
    font-size: 12px;
    font-weight: 600;
    background: #fee2e2;
    color: #991b1b;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
}

.trip-location-remove:hover:not(:disabled) {
    background: #fecaca;
    transform: translateY(-1px);
}

.trip-location-remove:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.trip-item {            display: flex;
                        flex-direction: column;
                        gap: 8px;
                        background: rgba(249,250,251,0.95);
                        padding: 14px 16px;
                        border-radius: 16px;
                        border: 1px solid rgba(229,231,235,0.85);
                        box-shadow: 0 3px 12px rgba(15,23,42,0.08);
                        text-align: right;
                        cursor: pointer;
                        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease; }

.trip-item:hover {      transform: translateY(-1px);
                        box-shadow: 0 6px 16px rgba(15,23,42,0.12); }

.trip-item:focus-visible { outline: 2px solid rgba(17,24,39,0.65);
                           outline-offset: 3px; }

.trip-item-active {     border-color: rgba(17,24,39,0.6);
                        box-shadow: 0 8px 20px rgba(17,24,39,0.18);
                        background: rgba(17,24,39,0.05); }

.trip-item-active .trip-item-name {
    color: #0f172a;
}

.trip-item-name {       font-size: 15px;
                        font-weight: 600;
                        color: #111827;
                        word-break: break-word; }

.trip-item-meta {       display: flex;
                        gap: 10px;
                        justify-content: flex-end;
                        flex-wrap: wrap;
                        font-size: 12px;
                        color: #4b5563; }

.trip-item-meta-entry { display: inline-flex;
                        align-items: center;
                        gap: 4px; }

.trip-item-meta-entry time {  color: inherit; }


.menu-container.open .overlay-controls { opacity: 1;
                                        transform: translateY(0) scale(1);
                                        pointer-events: auto; }

.overlay-button {   background: rgba(255,255,255,0.95);
                    color: #333;
                    border: none;
                    padding: 12px 18px;
                    font-size: 14px;
                    font-weight: 500;
                    border-radius: 15px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 3px 4px 0px 0px rgba(0, 0, 0, 0.15);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255,255,255,0.2);
                    min-width: 180px;
                    text-align: right;
                    width: 100%; }

.overlay-section-title { align-self: stretch;
                         padding-top: 3px;
                         font-size: 13px;
                         font-weight: 600;
                         letter-spacing: 0.08em;
                         text-transform: uppercase;
                         color: #444;
                         text-align: right; }

.overlay-button:hover {     background: rgba(255,255,255,1);
                            transform: translateY(-2px);
                            box-shadow: 4px 5px 0px 0px rgba(0, 0, 0, 0.15); }

.overlay-button:active {    transform: translateY(0);
                            box-shadow: 4px 5px 0px 0px rgba(0, 0, 0, 0.15); }

.overlay-button-active {
    background: #111827;
    color: #f9fafb;
    box-shadow: 0 14px 32px rgba(15, 23, 42, 0.28);
}

.overlay-button-active:hover {
    background: #1f2937;
    box-shadow: 0 16px 36px rgba(15, 23, 42, 0.35);
}

.overlay-button-active:focus-visible {
    outline: 2px solid rgba(255,255,255,0.6);
    outline-offset: 2px;
}

.manage-mode-active {
    cursor: crosshair !important;
}

.manage-mode-active .leaflet-interactive {
    cursor: crosshair !important;
}

.selection-toolbar {
    position: absolute;
    left: 24px;
    bottom: 24px;
    z-index: 1500;
    display: none;
    flex-direction: column;
    gap: 14px;
    padding: 18px 20px 20px;
    border-radius: 18px;
    background: rgba(17, 24, 39, 0.92);
    color: #f8fafc;
    box-shadow: 0 20px 40px rgba(15, 23, 42, 0.45);
    max-width: min(460px, calc(100vw - 48px));
}

.selection-toolbar.open {
    display: flex;
}

.selection-summary {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
}

.selection-count {
    font-size: 18px;
    font-weight: 700;
    letter-spacing: 0.04em;
}

.selection-summary-actions {
    display: inline-flex;
    gap: 8px;
    flex-wrap: wrap;
}

.selection-clear,
.selection-exit {
    border: none;
    background: transparent;
    color: rgba(255,255,255,0.75);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    padding: 4px 10px;
    border-radius: 999px;
    transition: background 0.2s ease, color 0.2s ease;
}

.selection-clear:hover,
.selection-exit:hover {
    background: rgba(255,255,255,0.12);
    color: #fff;
}

.selection-clear:focus-visible,
.selection-exit:focus-visible {
    outline: 2px solid rgba(255,255,255,0.35);
    outline-offset: 2px;
}

.selection-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.selection-action-button {
    flex: 1 1 180px;
    border: none;
    border-radius: 14px;
    padding: 11px 16px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    color: #0f172a;
}

.selection-action-button:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 12px 24px rgba(15, 23, 42, 0.35);
}

.selection-action-button:focus-visible {
    outline: 2px solid rgba(15,23,42,0.35);
    outline-offset: 2px;
}

.selection-action-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
}

.selection-action-trip {
    background: #dbeafe;
    color: #1d4ed8;
}

.selection-action-remove-trips {
    background: #cffafe;
    color: #0f766e;
}

.selection-action-archive {
    background: #fef3c7;
    color: #b45309;
}

.selection-action-delete {
    background: #fee2e2;
    color: #b91c1c;
}

.selection-hint {
    font-size: 12px;
    line-height: 1.4;
    color: rgba(255,255,255,0.75);
}

.leaflet-marker-icon.marker-selected {
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.75), 0 12px 28px rgba(37, 99, 235, 0.35);
    border-radius: 50%;
}

.checkbox-group {               display: flex;
                                flex-direction: column;
                                gap: 4px;
                                align-self: stretch; }

.checkbox-group label {         display: flex;
                                align-items: center;
                                gap: 8px;
                                font-size: 14px;
                                justify-content: space-between; }

.checkbox-group label span {    flex: 1;
                                min-width: 0;
                                text-align: right; }

.checkbox-group label input { flex-shrink: 0; }

.date-filter-group {            display: flex;
                                flex-direction: column;
                                gap: 8px;
                                align-self: stretch; }

.date-filter-group label {      display: flex;
                                align-items: center;
                                gap: 8px;
                                font-size: 14px;
                                justify-content: space-between; }

.date-filter-group label span { flex: 1;
                                text-align: right; }

.date-filter-group input {      border: 1px solid #ccc;
                                border-radius: 8px;
                                padding: 6px 10px;
                                font-size: 14px;
                                font-family: inherit; }

.date-filter-actions {          display: flex;
                                justify-content: flex-end; }

.date-filter-clear {            background: none;
                                border: none;
                                color: #0078d4;
                                font-size: 13px;
                                font-weight: 600;
                                cursor: pointer;
                                padding: 0; }

.date-filter-clear:hover {      text-decoration: underline; }

.date-filter-clear:focus {      outline: 2px solid rgba(0,120,212,0.6);
                                outline-offset: 2px; }

#status {   position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.9);
            padding: 8px 12px;
            border-radius: 4px;
            display: none;
            font-size: 14px;
            z-index: 1000; }

#status.success {   border: 1px solid #4CAF50;
                    color: #4CAF50; }

#status.error {     border: 1px solid #F44336;
                    color: #F44336; }

.loading-overlay {  position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(255,255,255,0.8);
                    display: none;
                    align-items: center;
                    justify-content: center;
                    z-index: 2000; }

.loading-spinner {  text-align: center;
                    font-size: 18px; }

.spinner {          border: 4px solid #f3f3f3;
                    border-top: 4px solid #0078D7;
                    border-radius: 50%;
                    width: 40px;
                    height: 40px;
                    animation: spin 1s linear infinite;
                    margin: 0 auto 10px; }

@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.modal-overlay {    position: absolute;
                    inset: 0; background: rgba(0,0,0,0.45);
                    display: none;
                    align-items: center;
                    justify-content: center;
                    z-index: 3000;
                    padding: 20px; }

.modal-overlay.open { display: flex; }

.modal-content {    background: #fff;
                    border-radius: 12px;
                    width: min(420px, 100%);
                    box-shadow: 0 12px 32px rgba(0,0,0,0.25);
                    padding: 24px;
                    display: flex;
                    flex-direction: column;
                    gap: 16px;
                    outline: none; }

.modal-content h2 { font-size: 20px;
                    margin-bottom: 4px; }

.modal-content form { display: flex;
                    flex-direction: column;
                    gap: 14px; }

.form-group {       display: flex;
                    flex-direction: column;
                    gap: 6px; }

.form-group-label {
    font-weight: 600;
    font-size: 13px;
    color: #374151;
}

.form-group label { font-weight: 600;
                    font-size: 14px;
                    color: #333; }

.form-group input, .form-group select { padding: 10px;
                                        border: 1px solid #ccc;
                                        border-radius: 8px;
                                        font-size: 14px;
                                        width: 100%; }

.form-helper-text {
    font-size: 12px;
    color: #555;
    line-height: 1.4;
}

.trip-membership-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-height: 180px;
    overflow-y: auto;
}

.trip-membership-list[hidden] {
    display: none;
}

.trip-membership-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 10px;
    background: rgba(243,244,246,0.8);
    border: 1px solid rgba(229,231,235,0.8);
}

.trip-membership-name {
    font-size: 13px;
    font-weight: 600;
    color: #111827;
    word-break: break-word;
}

.trip-membership-remove {
    border: none;
    border-radius: 999px;
    padding: 6px 12px;
    font-size: 12px;
    font-weight: 600;
    background: #fee2e2;
    color: #991b1b;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
    white-space: nowrap;
}

.trip-membership-remove:hover:not(:disabled) {
    background: #fecaca;
    transform: translateY(-1px);
}

.trip-membership-remove:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.alias-modal-original {
    display: block;
    margin-top: 2px;
    font-weight: 600;
    color: #1f2937;
}

.trip-rename-current {
    font-weight: 600;
    color: #1f2937;
}

.modal-actions {    display: flex;
                    justify-content: flex-end;
                    gap: 12px;
                    margin-top: 8px; }

.modal-button {     border: none;
                    border-radius: 8px;
                    padding: 10px 18px;
                    font-size: 14px;
                    cursor: pointer;
                    transition: background 0.2s ease, transform 0.2s ease;
                    font-weight: 600; }

.modal-button.secondary { background: #e0e0e0; color: #333; }
.modal-button.secondary:hover { background: #d5d5d5; }
.modal-button.primary { background: #0078d4; color: #fff; }
.modal-button.primary:hover { background: #0062ad; transform: translateY(-1px); }
.modal-button:focus { outline: 2px solid #0078d4; outline-offset: 2px; }

.archived-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-height: 320px;
    overflow-y: auto;
}

.archived-empty {
    font-size: 12px;
    color: #555;
    text-align: center;
}

.archived-item {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
    padding: 12px;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    background: #f9fafb;
}

.archived-item-details {
    display: flex;
    flex-direction: column;
    font-size: 12px;
    gap: 4px;
    flex: 1;
    min-width: 0;
}

.archived-item-place {
    font-weight: 500;
    color: #222;
    word-break: break-word;
}

.archived-item-meta {
    font-size: 12px;
    color: #555;
}

.archived-item-place-original {
    font-size: 11px;
    color: #6b7280;
}

.archived-item-action {
    align-self: center;
    white-space: nowrap;
}

.archived-item-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: stretch;
}

.marker-popup {
    font-family: var(--app-font-family);
    min-width: 220px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    color: #222;
}

.marker-popup-row {
    display: flex;
    flex-direction: column;
    gap: 2px;
    font-size: 13px;
    line-height: 1.4;
}

.marker-popup-label {
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    font-size: 11px;
}

.marker-popup-value {
    color: #1a1a1a;
    word-break: break-word;
}

.marker-popup-trips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.marker-popup-trip-pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px 10px;
    border-radius: 999px;
    background: rgba(59,130,246,0.1);
    color: #1d4ed8;
    font-size: 11px;
    font-weight: 600;
}

.marker-actions {
    display: flex;
    gap: 8px;
    margin-top: 4px;
    flex-wrap: wrap;
}

.marker-action {
    flex: 1 1 0;
    border: none;
    border-radius: 8px;
    padding: 8px 10px;
    font-size: 13px;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
    font-weight: 600;
}

.marker-action:focus {
    outline: 2px solid rgba(0,120,212,0.45);
    outline-offset: 2px;
}

.marker-action:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.marker-action-archive {
    background: #eef2ff;
    color: #314192;
}

.marker-action-archive:hover:not(:disabled) {
    background: #dce4ff;
    transform: translateY(-1px);
}

.marker-action-alias {
    background: #e6f4ea;
    color: #1b5e20;
}

.marker-action-alias:hover:not(:disabled) {
    background: #d0ecd9;
    transform: translateY(-1px);
}

.marker-action-delete {
    background: #fdecea;
    color: #b3261e;
}

.marker-action-delete:hover:not(:disabled) {
    background: #fbd6d2;
    transform: translateY(-1px);
}
